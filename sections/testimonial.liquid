{%- liquid
  assign st = section.settings
  assign container = st.container
  assign testimonials_style = st.testimonials_style
  assign heading = st.heading
  assign subheading = st.subheading
  assign quote_image = st.quote_image
-%}

{%- capture style -%}
  padding-top: {{ st.padding_top }}px;padding-bottom: {{ st.padding_bottom }}px;
{%- endcapture -%}
{%- if testimonials_style == 'style_1' -%}
  <section
    class="tp-testimonial-area grey-bg-7 pt-130 pb-135"
    style="{{ style | strip | strip_newlines }}"
    data-id="{{ section.id }}"
    id="{{ section.id }}"
  >
    <div class="{{ container }}">
      <div class="row justify-content-center">
        <div class="col-xl-12">
          <div class="tp-testimonial-slider p-relative z-index-1">
            <div class="tp-testimonial-shape">
              <span class="tp-testimonial-shape-gradient"></span>
            </div>
            {%- if heading != blank -%}
              <h3 class="tp-testimonial-section-title text-center">{{ heading }}</h3>
            {%- endif -%}
            <div class="row justify-content-center">
              <div class="col-xl-8 col-lg-8 col-md-10">
                <div class="tp-testimonial-slider-active swiper-container">
                  <div class="swiper-wrapper">
                    {%- for block in section.blocks -%}
                      <div class="tp-testimonial-item text-center mb-20 swiper-slide">
                        {%- if section.settings.show_rating -%}
                          <div class="tp-testimonial-rating">
                            {%- for i in (1..block.settings.testimonial_rating) -%}
                              <span>
                                <i class="fa-solid fa-star"></i>
                              </span>
                            {%- endfor -%}
                          </div>
                        {%- endif -%}
                        <div class="tp-testimonial-content">
                          {{ block.settings.description }}
                        </div>
                        <div class="tp-testimonial-user-wrapper d-flex align-items-center justify-content-center">
                          <div class="tp-testimonial-user d-flex align-items-center">
                            {%- if block.settings.image != blank -%}
                              <div class="tp-testimonial-avater mr-10">
                                <img
                                  src="{{ block.settings.image | image_url }}"
                                  alt="{{ block.settings.author }}"
                                >
                              </div>
                            {%- endif -%}
                            <div class="tp-testimonial-user-info tp-testimonial-user-translate">
                              <h3 class="tp-testimonial-user-title">{{ block.settings.author }}</h3>
                              <span class="tp-testimonial-designation">{{ block.settings.job }}</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    {%- endfor -%}
                  </div>
                </div>
              </div>
            </div>
            <div class="tp-testimonial-arrow d-none d-md-block">
              <button class="tp-testimonial-slider-button-prev">
                <svg
                  width="17"
                  height="14"
                  viewBox="0 0 17 14"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M1.061 6.99959L16 6.99959"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round" />
                  <path
                    d="M7.08618 1L1.06079 6.9995L7.08618 13"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round" />
                </svg>
              </button>
              <button class="tp-testimonial-slider-button-next">
                <svg
                  width="17"
                  height="14"
                  viewBox="0 0 17 14"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M15.939 6.99959L1 6.99959"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round" />
                  <path
                    d="M9.91382 1L15.9392 6.9995L9.91382 13"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round" />
                </svg>
              </button>
            </div>
            <div
              class="tp-testimonial-slider-dot tp-swiper-dot text-center mt-30 tp-swiper-dot-style-darkRed d-md-none"
            ></div>
          </div>
        </div>
      </div>
    </div>
  </section>
{%- elsif testimonials_style == 'style_2' -%}
  <section
    class="tp-testimonial-area pt-115 pb-100"
    style="{{ style | strip | strip_newlines }}"
    data-id="{{ section.id }}"
    id="{{ section.id }}"
  >
    <div class="container">
      <div class="row">
        <div class="col-xl-12">
          <div class="tp-section-title-wrapper-3 mb-45 text-center">
            {%- if subheading != blank -%}
              <span class="tp-section-title-pre-3">{{ subheading }}</span>
            {%- endif -%}
            {%- if heading != blank -%}
              <h3 class="tp-section-title-3">{{ heading }}</h3>
            {%- endif -%}
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-xl-12">
          <div class="tp-testimonial-slider-3">
            <div class="tp-testimoinal-slider-active-3 swiper-container">
              <div class="swiper-wrapper">
                {%- for block in section.blocks -%}
                  <div class="tp-testimonial-item-3 swiper-slide grey-bg-7 p-relative z-index-1">
                    {%- if quote_image != blank -%}
                      <div class="tp-testimonial-shape-3">
                        <img class="tp-testimonial-shape-3-quote" src="{{ quote_image | image_url }}">
                      </div>
                    {%- endif -%}
                    {%- if section.settings.show_rating -%}
                      <div class="tp-testimonial-rating tp-testimonial-rating-3">
                        {%- for i in (1..block.settings.testimonial_rating) -%}
                          <span>
                            <i class="fa-solid fa-star"></i>
                          </span>
                        {%- endfor -%}
                      </div>
                    {%- endif -%}
                    <div class="tp-testimonial-content-3">
                      {{ block.settings.description }}
                    </div>
                    <div class="tp-testimonial-user-wrapper-3 d-flex">
                      <div class="tp-testimonial-user-3 d-flex align-items-center">
                        {%- if block.settings.image != blank -%}
                          <div class="tp-testimonial-avater-3 mr-10">
                            <img src="{{ block.settings.image | image_url }}" alt="{{ block.settings.author }}">
                          </div>
                        {%- endif -%}
                        <div class="tp-testimonial-user-3-info tp-testimonial-user-translate">
                          <h3 class="tp-testimonial-user-3-title">{{ block.settings.author }} /</h3>
                          <span class="tp-testimonial-3-designation">{{ block.settings.job }}</span>
                        </div>
                      </div>
                    </div>
                  </div>
                {%- endfor -%}
              </div>
            </div>
            <div class="tp-testimoinal-slider-dot-3 tp-swiper-dot-border text-center mt-50"></div>
          </div>
        </div>
      </div>
    </div>
  </section>
{%- elsif testimonials_style == 'style_3' -%}
  <section
    class="tp-testimonial-area"
    style="{{ style | strip | strip_newlines }}"
    data-id="{{ section.id }}"
    id="{{ section.id }}"
  >
    <div class="{{ container }}">
      <div class="row justify-content-center">
        <div class="col-xl-12">
          <div class="tp-testimonial-slider-wrapper-5">
            <div class="row">
              <div class="col-xl-7 offset-xl-3">
                <div class="tp-section-title-wrapper-5 mb-45">
                  {%- if subheading != blank -%}
                    <span class="tp-section-title-pre-5">
                      {{ subheading }}
                      <svg
                        width="82"
                        height="22"
                        viewBox="0 0 82 22"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M81 14.5798C0.890564 -8.05914 -5.81154 0.0503902 5.00322 21"
                          stroke="currentColor"
                          stroke-opacity="0.3"
                          stroke-width="2"
                          stroke-miterlimit="3.8637"
                          stroke-linecap="round" />
                      </svg>
                    </span>
                  {%- endif -%}
                  {%- if heading != blank -%}
                    <h3 class="tp-section-title-5">{{ heading }}</h3>
                  {%- endif -%}
                </div>
              </div>
            </div>
            <div class="tp-testimonial-slider-5 p-relative">
              <div class="tp-testimonial-slider-active-5 swiper-container pb-15">
                <div class="swiper-wrapper">
                  {%- for block in section.blocks -%}
                    <div class="tp-testimonial-item-5 d-md-flex swiper-slide white-bg">
                      <div class="tp-testimonial-avater-wrapper-5 p-relative">
                        {%- if block.settings.image != blank -%}
                          <div class="tp-avater-rounded mr-60">
                            <div class="tp-testimonial-avater-5 ">
                              <img
                                src="{{ block.settings.image | image_url }}"
                                alt="{{ block.settings.author }}"
                              >
                            </div>
                          </div>
                        {%- endif -%}
                        {%- if quote_image != blank -%}
                          <span class="quote-icon">
                            <img src="{{ quote_image | image_url }}">
                          </span>
                        {%- endif -%}
                      </div>

                      <div class="tp-testimonial-content-5">
                        <div class="tp-testimonial-rating tp-testimonial-rating-5">
                          {%- assign rating = block.settings.testimonial_rating -%}
                          {%- for i in (1..5) -%}
                            {%- if i <= rating -%}
                              <span>
                                <i class="fa-solid fa-star"></i>
                              </span>
                            {%- else -%}
                              <span>
                                <i class="fa-regular fa-star"></i>
                              </span>
                            {%- endif -%}
                          {%- endfor -%}
                        </div>

                        {{ block.settings.description }}

                        <div class="tp-testimonial-user-5-info">
                          <h3 class="tp-testimonial-user-5-title">{{ block.settings.author }}</h3>
                          <span class="tp-testimonial-user-5-designation">{{ block.settings.job }}</span>
                        </div>
                      </div>
                    </div>
                  {%- endfor -%}
                </div>
              </div>
              <div class="tp-testimonial-arrow-5">
                <button type="button" class="tp-testimonial-slider-5-button-prev">
                  <svg
                    width="33"
                    height="16"
                    viewBox="0 0 33 16"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M2.10059 7.97559L32.1006 7.97559"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round" />
                    <path
                      d="M8.15039 0.999999L1.12076 7.99942L8.15039 15"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round" />
                  </svg>
                </button>
                <button type="button" class="tp-testimonial-slider-5-button-next">
                  <svg
                    width="33"
                    height="16"
                    viewBox="0 0 33 16"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M31.1006 7.97559L1.10059 7.97559"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round" />
                    <path
                      d="M25.0508 0.999999L32.0804 7.99942L25.0508 15"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round" />
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
{%- endif -%}

{% schema %}
{
  "name": "Testimonials",
  "settings": [
    {
      "type": "header",
      "content": "Section header"
    },
    {
      "type": "select",
      "id": "container",
      "label": "Layout",
      "default": "container",
      "options": [
        {
          "value": "container",
          "label": "Default"
        },
        {
          "value": "container-fluid",
          "label": "Fluid container"
        },
        {
          "value": "full-width",
          "label": "Full width"
        }
      ]
    },
    {
      "type": "select",
      "id": "testimonials_style",
      "label": "Testimonials style",
      "default": "style_1",
      "options": [
        {
          "value": "style_1",
          "label": "Style 1"
        },
        {
          "value": "style_2",
          "label": "Style 2"
        },
        {
          "value": "style_3",
          "label": "Style 3"
        }
      ]
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "What People Are Saying"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "checkbox",
      "id": "show_rating",
      "label": "Show rating",
      "default": true
    },
    {
      "type": "image_picker",
      "id": "quote_image",
      "label": "Quote image",
      "info": "70 × 50 recommended"
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding top",
      "default": 100,
      "min": 0,
      "max": 150,
      "step": 2,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bottom",
      "default": 100,
      "min": 0,
      "max": 150,
      "step": 2,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "type": "testimonials",
      "name": "Testimonials",
      "settings": [
        {
          "type": "richtext",
          "id": "description",
          "label": "Content",
          "default": "<p>You can add text content from press comments, reviews, or testimonials here.</p>"
        },
        {
          "type": "text",
          "id": "author",
          "label": "Author",
          "default": "Siarhei Dzenisenka"
        },
        {
          "type": "text",
          "id": "job",
          "label": "Job",
          "default": "Founder/CEO"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image",
          "info": "70 x 70px recommended"
        },
        {
          "type": "range",
          "id": "testimonial_rating",
          "label": "Testimonial rating",
          "default": 3,
          "min": 1,
          "max": 5,
          "step": 1
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonials",
      "blocks": [
        {
          "type": "testimonials"
        },
        {
          "type": "testimonials"
        },
        {
          "type": "testimonials"
        }
      ]
    }
  ]
}
{% endschema %}
